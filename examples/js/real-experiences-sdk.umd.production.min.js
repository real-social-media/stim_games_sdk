!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self)["real-experiences-sdk"]={})}(this,(function(e){"use strict";class t{constructor(e){this.requests={},this.target=e,window.addEventListener("message",this.response.bind(this))}response(e){const t=e.data,r=this.requests[t.type];if(r){const e=null==t?void 0:t.error;r.forEach(({resolve:r,reject:s})=>{e?s(t.error):r(t)}),this.requests[t.type]=[]}}send(e){this.target.postMessage(e,"*")}request(e){return new Promise((t,r)=>{this.requests[e.type]||(this.requests[e.type]=[]),this.requests[e.type].push({resolve:t,reject:r}),this.send(e)})}}var r;(r=e.IframeActionKind||(e.IframeActionKind={})).Authorize="@gameSDK:authorize",r.RequestEmail="@gameSDK:requestEmail",r.Purchase="@gameSDK:purchase",r.CheckPurchases="@gameSDK:checkPurchases";const s=()=>({type:e.IframeActionKind.Authorize}),i=()=>({type:e.IframeActionKind.RequestEmail}),n=t=>({type:e.IframeActionKind.Purchase,payload:t}),o=t=>({type:e.IframeActionKind.CheckPurchases,payload:t});var a={__proto__:null,get IframeActionKind(){return e.IframeActionKind},authorize:s,requestEmail:i,purchase:n,checkPurchases:o};class c{constructor(e){this.emmiter=e}authorize(){try{return Promise.resolve(this.emmiter.request(s())).then((function(e){return e.payload}))}catch(e){return Promise.reject(e)}}requestEmail(){try{return Promise.resolve(this.emmiter.request(i())).then((function(e){return e.payload}))}catch(e){return Promise.reject(e)}}purchase(e){try{return Promise.resolve(this.emmiter.send(n(e))).then((function(){}))}catch(e){return Promise.reject(e)}}checkPurchases(e){try{return Promise.resolve(this.emmiter.request(o(e))).then((function(e){return e.payload}))}catch(e){return Promise.reject(e)}}}var u=new c(new t(window.parent));e.actions=a,e.default=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=real-experiences-sdk.umd.production.min.js.map
